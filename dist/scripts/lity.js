!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(e,n)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,require("jquery")):e.lity=t(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){var t=z();return F&&e.length?(e.one(F,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function i(e,n,i){if(1===arguments.length)return t.extend({},e);if("string"==typeof n){if(void 0===i)return void 0===e[n]?null:e[n];e[n]=i}else t.extend(e,n);return this}function o(e){for(var t,n=decodeURI(e.split("#")[0]).split("&"),i={},o=0,r=n.length;o<r;o++)n[o]&&(t=n[o].split("="),i[t[0]]=t[1]);return i}function r(e,n){return e+(e.indexOf("?")>-1?"&":"?")+t.param(n)}function a(e,t){var n=e.indexOf("#");return-1===n?t:(n>0&&(e=e.substr(n)),t+e)}function l(e){return t('<span class="lity-error"/>').append(e)}function s(e,n){var i=n.opener()&&n.opener().data("lity-desc")||"Image with no description",o=t('<img src="'+e+'" alt="'+i+'"/>'),r=z(),a=function(){r.reject(l("Failed loading image"))};return o.on("load",function(){if(0===this.naturalWidth)return a();r.resolve(o)}).on("error",a),r.promise()}function d(e,n){var i,o,r;try{i=t(e)}catch(e){return!1}return!!i.length&&(o=t('<i style="display:none !important"/>'),r=i.hasClass("lity-hide"),n.element().one("lity:remove",function(){o.before(i).remove(),r&&!i.closest(".lity-content").length&&i.addClass("lity-hide")}),i.removeClass("lity-hide").after(o))}function c(e){var n=K.exec(e);return!!n&&v(a(e,r("https://www.youtube"+(n[2]||"")+".com/embed/"+n[4],t.extend({autoplay:1},o(n[5]||"")))))}function u(e){var n=M.exec(e);return!!n&&v(a(e,r("https://player.vimeo.com/video/"+n[3],t.extend({autoplay:1},o(n[4]||"")))))}function f(e){var n=A.exec(e);return!!n&&(0!==e.indexOf("http")&&(e="https:"+e),v(a(e,r("https://www.facebook.com/plugins/video.php?href="+e,t.extend({autoplay:1},o(n[4]||""))))))}function y(e){var t=P.exec(e);return!!t&&v(a(e,r("https://www.google."+t[3]+"/maps?"+t[6],{output:t[6].indexOf("layer=c")>0?"svembed":"embed"})))}function v(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function p(){return j.documentElement.clientHeight?j.documentElement.clientHeight:Math.round(D.height())}function m(e){var t=x();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&h(e,t))}function h(e,t){var n=t.element().find($),i=n.index(j.activeElement);e.shiftKey&&i<=0?(n.get(n.length-1).focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n.get(0).focus(),e.preventDefault())}function g(){t.each(O,function(e,t){t.resize()})}function b(e){1===O.unshift(e)&&(T.addClass("lity-active"),D.on({resize:g,keydown:m})),t("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=t(this);void 0===e.data(W)&&e.data(W,e.attr(q)||null)}).attr(q,"true")}function w(e){var n;e.element().attr(q,"true"),1===O.length&&(T.removeClass("lity-active"),D.off({resize:g,keydown:m})),O=t.grep(O,function(t){return e!==t}),n=O.length?O[0].element():t(".lity-hidden"),n.removeClass("lity-hidden").each(function(){var e=t(this),n=e.data(W);n?e.attr(q,n):e.removeAttr(q),e.removeData(W)})}function x(){return 0===O.length?null:O[0]}function C(e,n,i,o){var r,a="inline",l=t.extend({},i);return o&&l[o]?(r=l[o](e,n),a=o):(t.each(["inline","iframe"],function(e,t){delete l[t],l[t]=i[t]}),t.each(l,function(t,i){return!i||(!(!i.test||i.test(e,n))||(r=i(e,n),!1!==r?(a=t,!1):void 0))})),{handler:a,content:r||""}}function k(e,o,r,a){function l(e){c=t(e).css("max-height",p()+"px"),d.find(".lity-loader").each(function(){var e=t(this);n(e).always(function(){e.remove()})}),d.removeClass("lity-loading").find(".lity-content").empty().append(c),f=!0,c.trigger("lity:ready",[u])}var s,d,c,u=this,f=!1,y=!1;o=t.extend({},H,o),d=t(o.template),u.element=function(){return d},u.opener=function(){return r},u.options=t.proxy(i,u,o),u.handlers=t.proxy(i,u,o.handlers),u.resize=function(){f&&!y&&c.css("max-height",p()+"px").trigger("lity:resize",[u])},u.close=function(){if(f&&!y){y=!0,w(u);var e=z();if(a&&(j.activeElement===d[0]||t.contains(d[0],j.activeElement)))try{a.focus()}catch(e){}return c.trigger("lity:close",[u]),d.removeClass("lity-opened").addClass("lity-closed"),n(c.add(d)).always(function(){c.trigger("lity:remove",[u]),d.remove(),d=void 0,e.resolve()}),e.promise()}},s=C(e,u,o.handlers,o.handler),d.attr(q,"false").addClass("lity-loading lity-opened lity-"+s.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){t(e.target).is("[data-lity-close]")&&u.close()}).trigger("lity:open",[u]),b(u),t.when(s.content).always(l)}function E(e,n,i){e.preventDefault?(e.preventDefault(),i=t(this),e=i.data("lity-target")||i.attr("href")||i.attr("src")):i=t(i);var o=new k(e,t.extend({},i.data("lity-options")||i.data("lity"),n),i,j.activeElement);if(!e.preventDefault)return o}var j=e.document,D=t(e),z=t.Deferred,T=t("html"),O=[],q="aria-hidden",W="lity-"+q,$='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',H={esc:!0,handler:null,handlers:{image:s,inline:d,youtube:c,vimeo:u,googlemaps:y,facebookvideo:f,iframe:v},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},I=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,K=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,M=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,P=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,A=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,F=function(){var e=j.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();return s.test=function(e){return I.test(e)},E.version="2.3.1",E.options=t.proxy(i,E,H),E.handlers=t.proxy(i,E,H.handlers),E.current=x,t(j).on("click.lity","[data-lity]",E),E});